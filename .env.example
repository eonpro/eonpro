# ============================================
# DATABASE CONNECTION
# ============================================
# GitHub Actions (Pre-Deployment workflow): add DATABASE_URL and DIRECT_DATABASE_URL
# as repository secrets so the pre-deploy check can run. See docs/CI_AND_PRE_DEPLOY.md.
#
# For DEVELOPMENT (SQLite):
DATABASE_URL="file:./prisma/dev.db"
# DIRECT_DATABASE_URL is optional for SQLite

# For PRODUCTION with Supabase/PgBouncer:
# Pooled connection (port 6543) - used for all queries
# NOTE: pgbouncer=true is AUTO-ADDED in production/Vercel if not present
# DATABASE_URL="postgresql://postgres:[PASSWORD]@db.[PROJECT].supabase.co:6543/postgres?pgbouncer=true"
# Direct connection (port 5432) - used for migrations only
# DIRECT_DATABASE_URL="postgresql://postgres:[PASSWORD]@db.[PROJECT].supabase.co:5432/postgres"

# For PRODUCTION with Neon:
# DATABASE_URL="postgresql://[user]:[password]@[host]/[db]?sslmode=require"
# DIRECT_DATABASE_URL="postgresql://[user]:[password]@[host]/[db]?sslmode=require"

# For PRODUCTION with Prisma Accelerate:
# DATABASE_URL="prisma://accelerate.prisma-data.net/?api_key=YOUR_KEY"
# DIRECT_DATABASE_URL="postgresql://[user]:[password]@[host]/[db]"

# Connection Pool Settings (optional; defaults are optimized for serverless)
# On Vercel we use connection_limit=1 per instance to avoid P2024 pool exhaustion.
# Use PgBouncer (e.g. Supabase pooler port 6543) or RDS Proxy in production.
# Override only if needed (Vercel cap is 1):
# DATABASE_CONNECTION_LIMIT=1

# Google Maps
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=""
GOOGLE_MAPS_SERVER_KEY=""

# Google Calendar OAuth (Connect Google Calendar - required for calendar sync)
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""
# GOOGLE_REDIRECT_URI defaults to NEXTAUTH_URL + /api/calendar-sync/google/callback
GOOGLE_REDIRECT_URI=""

# Lifefile Credentials
LIFEFILE_BASE_URL="https://host47a.lifefile.net:10165/lfapi/v1"
LIFEFILE_USERNAME=""
LIFEFILE_PASSWORD=""
LIFEFILE_VENDOR_ID="11596"
LIFEFILE_PRACTICE_ID="1266794"
LIFEFILE_PRACTICE_NAME="APOLLO BASED HEALTH LLC"
LIFEFILE_PRACTICE_ADDRESS="200 Frandorson Cir Ste 203 Apollo Beach FL 33572"
LIFEFILE_PRACTICE_PHONE="813.213.3336"
LIFEFILE_LOCATION_ID="110396"
LIFEFILE_NETWORK_ID="1373"

# Webhook / Storage
MEDLINK_WEBHOOK_SECRET=""
WEIGHTLOSSINTAKE_WEBHOOK_SECRET=""
WELLMEDR_INTAKE_WEBHOOK_SECRET=""
STORAGE_INTAKE_DIR="./storage/intake-pdfs"

# ============================================
# STRIPE CONFIGURATION
# ============================================
# There are THREE separate Stripe contexts:
#
# 1. EONMEDS CLINIC ACCOUNT - EonMeds' own Stripe account (completely separate)
# 2. EONPRO PLATFORM ACCOUNT - The SaaS platform's Stripe Connect account
# 3. CONNECTED CLINICS - Individual clinics connect their own Stripe accounts
# ============================================

# --- EonMeds Clinic Stripe Account ---
# Used for: EonMeds clinic's own payments, subscriptions, invoices
# Get from: https://dashboard.stripe.com/apikeys (EonMeds Stripe account)
# NOTE: This is completely separate from Stripe Connect
EONMEDS_STRIPE_SECRET_KEY=""
EONMEDS_STRIPE_WEBHOOK_SECRET=""
NEXT_PUBLIC_EONMEDS_STRIPE_PUBLISHABLE_KEY=""

# --- Overtime (OT) Clinic Stripe Account ---
# Used for: OT clinic's own payments (ot.eonpro.io)
# Get from: https://dashboard.stripe.com/apikeys (OT's Stripe account)
# NOTE: This is a dedicated account like EonMeds, not Stripe Connect
OT_STRIPE_SECRET_KEY=""
OT_STRIPE_WEBHOOK_SECRET=""
NEXT_PUBLIC_OT_STRIPE_PUBLISHABLE_KEY=""

# --- EONpro Platform Stripe Connect ---
# Used for: Allowing OTHER clinics to connect their own Stripe accounts
# Get from: A SEPARATE Stripe account created for EONpro platform
# Dashboard: https://dashboard.stripe.com/settings/connect
STRIPE_CONNECT_PLATFORM_SECRET_KEY=""
STRIPE_CONNECT_CLIENT_ID=""
STRIPE_CONNECT_WEBHOOK_SECRET=""

# Clinic Isolation (Security - ensures webhook data goes to correct clinic)
# Set this to the database ID of the Wellmedr clinic for extra security validation
WELLMEDR_CLINIC_ID=""

# Default clinic for Stripe webhook: when a payment matches no patient, new patients
# are created under this clinic. Set to Eonmeds clinic ID (e.g. 3) so revenue appears
# under https://eonmeds.eonpro.io/admin/finance
# DEFAULT_CLINIC_ID=""

# Optional: Edge subdomain -> clinic ID map so ot.eonpro.io etc. get clinic context without DB in middleware.
# Generate from your DB with: npx tsx scripts/generate-subdomain-clinic-map.ts
# Format: subdomain:id,subdomain:id (e.g. ot:5,wellmedr:2,eonmeds:3)
# SUBDOMAIN_CLINIC_ID_MAP=""

# Optional: Force auth cookies to be shared across *.eonpro.io when Host header is wrong (e.g. some proxies).
# Set to .eonpro.io in production to fix 401/Session Expired on wellmedr.eonpro.io and other clinic subdomains.
# EONPRO_COOKIE_DOMAIN=".eonpro.io"

# ============================================
# ADDRESS VALIDATION (SmartyStreets)
# ============================================
# Optional: For enterprise address validation and standardization
# Sign up at: https://www.smarty.com/pricing
# Get credentials from: https://www.smarty.com/account/keys
#
# Features when enabled:
# - Address deliverability verification
# - Automatic address standardization (USPS format)
# - Spelling correction for city/state names
# - ZIP+4 completion
#
# If not configured, the system uses local regex-based parsing only
SMARTYSTREETS_AUTH_ID=""
SMARTYSTREETS_AUTH_TOKEN=""

# ============================================
# AWS SES EMAIL CONFIGURATION
# ============================================
# AWS credentials for SES email sending
# Get from AWS Console: IAM > Users > Security credentials
AWS_SES_REGION="us-east-2"
AWS_ACCESS_KEY_ID=""
AWS_SECRET_ACCESS_KEY=""

# SES Configuration
AWS_SES_FROM_EMAIL="contact@eonpro.io"
AWS_SES_FROM_NAME="EONPRO"
AWS_SES_REPLY_TO_EMAIL=""
# Optional: SES Configuration Set for event monitoring; see docs/AWS_SES_INTEGRATION.md
AWS_SES_CONFIGURATION_SET=""

# AWS SES Bounce/Complaint Handling (SNS Topics)
# Create SNS topics in AWS Console and subscribe the webhook URL:
# https://yourdomain.com/api/webhooks/ses-bounce
# Then configure SES to send bounces/complaints to these topics
AWS_SNS_TOPIC_ARN_BOUNCES=""
AWS_SNS_TOPIC_ARN_COMPLAINTS=""

# ============================================
# CRON JOB SECURITY
# ============================================
# Secret for authenticating cron job requests
# Generate with: openssl rand -hex 32
CRON_SECRET=""

# ============================================
# ZOOM TELEHEALTH INTEGRATION
# ============================================
# For telehealth video consultations via Zoom
# Get credentials from: https://marketplace.zoom.us/
#
# Create a Server-to-Server OAuth app in Zoom App Marketplace
# Required scopes: meeting:write, meeting:read, user:read
ZOOM_ACCOUNT_ID=""
ZOOM_CLIENT_ID=""
ZOOM_CLIENT_SECRET=""

# Optional: SDK credentials for embedded meeting
ZOOM_SDK_KEY=""
ZOOM_SDK_SECRET=""

# Optional: Webhook verification secret
ZOOM_WEBHOOK_SECRET=""

# ============================================
# FEATURE FLAGS
# ============================================
# Enable/disable platform features. All default to false if not set.
#
# Payment Features
NEXT_PUBLIC_ENABLE_STRIPE_SUBSCRIPTIONS="false"
NEXT_PUBLIC_ENABLE_STRIPE_CONNECT="false"
NEXT_PUBLIC_ENABLE_SQUARE_PAYMENTS="false"

# Communication Features
NEXT_PUBLIC_ENABLE_TWILIO_SMS="false"
NEXT_PUBLIC_ENABLE_TWILIO_CHAT="false"

# Telehealth Features (REQUIRED for Zoom integration to work)
NEXT_PUBLIC_ENABLE_ZOOM_TELEHEALTH="false"  # Set to "true" to enable video consultations
NEXT_PUBLIC_ENABLE_ZOOM_WAITING_ROOM="false"

# AWS Features
NEXT_PUBLIC_ENABLE_AWS_S3_STORAGE="false"
NEXT_PUBLIC_ENABLE_AWS_SES_EMAIL="false"
NEXT_PUBLIC_ENABLE_AWS_EVENTBRIDGE="false"

# Advanced Features
NEXT_PUBLIC_ENABLE_DYNAMIC_FORMS="false"
NEXT_PUBLIC_ENABLE_MULTI_LANGUAGE="false"
NEXT_PUBLIC_ENABLE_ADVANCED_REPORTING="false"
NEXT_PUBLIC_ENABLE_DOSSPOT_EPRESCRIBING="false"

# Development: Enable all features at once
# NEXT_PUBLIC_ENABLE_ALL_FEATURES="true"

# Patient portal base path (white-label: eonmeds.eonpro.io/portal, wellmedr.eonpro.io/portal, etc.)
NEXT_PUBLIC_PATIENT_PORTAL_PATH="/portal"

# ============================================
# SENTRY (Error tracking & performance)
# ============================================
# Get DSN from: https://sentry.io/settings/projects/<org>/<project>/keys/
# Set both so server and client errors are captured. Optional but recommended for production.
# SENTRY_DSN="https://xxx@xxx.ingest.sentry.io/xxx"
# NEXT_PUBLIC_SENTRY_DSN="https://xxx@xxx.ingest.sentry.io/xxx"
# Optional: for source map uploads on deploy (Sentry dashboard: Settings > Auth Tokens)
# SENTRY_ORG="your-org"
# SENTRY_PROJECT="your-project"
# SENTRY_AUTH_TOKEN="sntrys_xxx"
